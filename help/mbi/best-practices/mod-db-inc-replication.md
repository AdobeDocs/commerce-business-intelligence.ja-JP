---
title: 増分レプリケーションをサポートするためのデータベースの変更
description: 増分レプリケーションをサポートするようにデータベースを変更する方法を説明します。
exl-id: c9a38892-6096-4eb5-8a53-35b8b7b083dc
role: Admin, Data Architect, Data Engineer, User
feature: Data Integration, Data Import/Export, Data Warehouse Manager
source-git-commit: adb7aaef1cf914d43348abf5c7e4bec7c51bed0c
workflow-type: tm+mt
source-wordcount: '334'
ht-degree: 0%

---

# 増分レプリケーションのサポート

現在テーブルで増分レプリケーションが許可されていない場合は、考えられる解決策として、以下の推奨事項を参照してください。

## 変更日時

最も理想的なレプリケーション方法である `Modified At` メソッドでは、`datetime` 列を使用して、新しいデータや更新されたデータを検出します。 このメソッドを使用するテーブルの `datetime` 列にはインデックスを付ける必要があり、null 値を含めることはできません。

テーブルに `datetime` 列がない場合は、列にインデックスを追加 `modified at` きます。 `modified at` 列には Null 値を使用できません。 列が各行に対して入力されていることを確認します。

`Modified At` メソッドが意図したとおりに動作することを確認するために、テーブルから行を削除することはできません。 代わりに、`deleted` の列をテーブルに追加して、行を無効としてマークする必要があります。 この列は、行が無効な場合は `1` を返し、それ以外の場合は `0` を返します。 その後、この列を使用して、指標やレポートを作成する際に無効な行を除外できます。

## 1 つの自動増分プライマリキーの変更

`Modified At` メソッドを有効にできない場合は、1 つの自動増分プライマリキーが次善の選択肢です。 Data Warehouseで現在の最大値より大きい主キー値を検索することで、この方法を使用してテーブル内で新しいデータが検出されます。

このメソッドを使用するテーブルは、プライマリキーを自動増分する整数を含む単一の列であることに注意してください。 このメソッドをデータベースで使用するには、次のように変更します。

* プライマリキーが複合キーまたは非整数の場合は、プライマリキーを自動増分整数に変更します
* プライマリキーが 1 つの整数の列であるが、キーを非連続で割り当てることができる場合は、プライマリキーを自動インクリメントに変更します

## まとめ

テーブルに小さな変更を加えることで、より高速で効率的な増分レプリケーション方式を活用できます。 ただし、これが不可能な場合でも、別の手順を実行して [&#x200B; 更新時間を短縮 &#x200B;](../best-practices/reduce-update-cycle-time.md)、[&#x200B; データベースを最適化 &#x200B;](../best-practices/opt-db-analysis.md) することができます。
