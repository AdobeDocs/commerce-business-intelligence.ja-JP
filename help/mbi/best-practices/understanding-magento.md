---
title: について [!DNL Commerce Intelligence] 0.5511122
description: の操作と改善について説明します [!DNL Commerce Intelligence] 環境。
exl-id: 601b5fba-da02-4cc8-96ed-147c24f326f9
role: Admin, Data Architect, Data Engineer, User
feature: Data Warehouse Manager
source-git-commit: adb7aaef1cf914d43348abf5c7e4bec7c51bed0c
workflow-type: tm+mt
source-wordcount: '749'
ht-degree: 0%

---

# あなたの [!DNL Adobe Commerce Intelligence] 0.5511122

コマースデータを分析する際は、これらの要因と一般的な誤解に注意してください。 Commerce スキーマを正しく使用していることを確認するためにサポートが必要な場合は、遠慮なく次のことを行ってください [サポートに連絡する](https://experienceleague.adobe.com/docs/commerce-knowledge-base/kb/troubleshooting/miscellaneous/mbi-service-policies.html).

## [!DNL entity\_id]

テーブルの多くには、という名前の列が含まれています。 `entity\_id`. 含む各テーブルで `entity\_id`：この列は、一意の行の識別に使用されます。

例えば、の各行は `sales\_order` テーブルは一意の順序です。 このテーブルのプライマリキーはと呼ばれます `entity\_id`. この列は次のように考えることができます `order\_id`. 別のテーブルに、 `customer\_entity`各行は一意の顧客を表します。 このテーブルの主キーも、 `entity\_id`。これは、次のように考えることができます `customer\_id`.

これらのテーブルでは、 `sales\_order.entity\_id` 次と等しくない `customer\_entity.entity\_id`. これは、を含むすべてのテーブルのセットに対して true です。 `entity\_id`: `table\_A.entity\_id` 次と等しくない `table\_B.entity\_id`.

## [!DNL Guest orders]

顧客がアカウントを持たずにサイトから注文できるようにする（ゲストによる注文）場合、それらの顧客はサイトの行として入力されません `customer\_entity` テーブル。 また、ゲストによる注文にはヌルが付きます `customer\_id` の値 `sales\_order` テーブル。

したがって、ゲストの行動を経時的に追跡する場合は、すべての顧客レベルの列を `sales\_order` テーブル。などの顧客識別子を使用します `customer\_email`.

使用する場合 `sales\_order` テーブル顧客テーブルの場合、顧客レベルの指標を作成する際は注意が必要です。 例えば、平均生涯売上高指標について考えてみましょう。 この指標は、顧客ベース全体の平均生涯売上高を特定するために使用されます。 これには、顧客ごとに生涯売上高を返す新しい列が最初に必要です。 次に、この列を平均して、顧客の平均生涯売上高を取得する必要があります。

を使用できる場合 `customer\_entity` テーブル、各行は 1 つの顧客であり、各顧客は 1 回だけそのテーブルに存在します。 したがって、「生涯売上高」列が表示されている場合は、平均指標を作成するだけで済みます。 ただし、 `sales\_order` テーブル顧客テーブルは、1 人の顧客が多数の行に存在する場合があります。 ライフタイム収益列を設定した後、特定の顧客によって行われた各注文（行）は、その顧客のライフタイム収益を表示しますが、その顧客を全体的な平均指標に含めるのは 1 回だけです。

このコツは、各顧客を 1 回だけ含めるフィルターを指標に追加する必要があることです。 Adobeでは、という名前のフィルターセットを作成して使用することをお勧めします。 **カウントする顧客** でフィルタリングする **顧客の注文番号= 1** （不要な顧客を除外するために、特に必要になるフィルターがあります）。 このフィルターを追加すると、顧客レベルの指標に各顧客を 1 回だけ含めることができます。

## 製品とカテゴリ

製品には複数のカテゴリを設定でき、複数の製品にカテゴリを使用できます。 したがって、カテゴリレベルの分析を設定する場合は、正しい定義を使用するように注意する必要があります。 最上位のカテゴリが必要ですか？ 第 2 レベルのカテゴリ？ 製品が複数のトップレベルカテゴリに分類できる場合はどうすればよいですか？

Commerceの実装で定義されているように、「衣類」（トップレベル）、「アウターウェア」（第 2 レベル）、「パンツ」（第 3 レベル）の 3 つの異なるカテゴリレベルに分類されるジーンズを考えてみます。 カテゴリのパフォーマンスを販売単位数で分析することをお勧めします。 この分析に必要な指標は次のとおりです _販売された品目_、上に構築されます `sales\_order\_item` テーブル。 したがって、カテゴリレベルの情報を項目テーブルに移動する必要があります。 各行 `sales\_order\_item` テーブルにはが関連付けられています `product\_id`したがって、製品に関連付けられているカテゴリがわかっている場合は、その情報を目的のテーブルに引き継ぐことができます。

データを移動する前に、適切な結合とフィルターを理解して、正しいカテゴリを確実に取得する必要があります。 一部の分析では「パンツ」を知る必要がある場合がありますが、他の分析では、「衣類」の方が適切な場合があります。 これらは、別個に識別される別個のカテゴリです。 各カテゴリ・レベルの定義方法を把握することにより、特定の分析に対してユニット売上を適切なカテゴリに関連付けることができます。

さて、次を持っているとします `Our Favorites` web サイトのホームページの最上位のカテゴリ。 おそらく、Commerce ストアを実装して、両方のジーンズを含めたことでしょう。 `Clothing` カテゴリと `Our Favorites` カテゴリ。 その場合、このジーンズのペアには複数の最上位カテゴリがあります。 その場合、単一の最上位カテゴリをに移動します `sales\_order\_item` 複数のオプションがあるので、テーブルは非常に意味がありません。 これに対処するために、Adobeでは、特定のカテゴリをチェックする「はい/いいえ」の列を作成することをお勧めします。 例： `Is product in Clothing category?` および `Is product in Our Favorites category?` 列を使用すると、製品がこれらの特定のカテゴリに該当するかどうかを確認できます。
