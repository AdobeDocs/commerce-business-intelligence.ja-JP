---
title: テーブルの関係の理解と評価
description: あるテーブル内の可能なオカレンスの数を別のテーブル内のエンティティに属させることができ、その逆の数を理解する方法を説明します。
exl-id: e7256f46-879a-41da-9919-b700f2691013
source-git-commit: 03a5161930cafcbe600b96465ee0fc0ecb25cae8
workflow-type: tm+mt
source-wordcount: '992'
ht-degree: 0%

---

# テーブルの関係の理解と評価

2 つの特定のテーブル間の関係を評価する場合、あるテーブル内の可能なオカレンスの数を別のテーブル内のエンティティに属させることができ、またその逆の数を把握する必要があります。 例えば、 `users` テーブルと `orders` 表。 この場合、 **注文件数** 与えられた **ユーザー** が配置され、可能な数 **ユーザー** an **注文** がに属する可能性があります。

データの整合性を維持するには、関係を理解することが不可欠です。これは、 [計算列](../data-warehouse-mgr/creating-calculated-columns.md) および [寸法](../data-warehouse-mgr/manage-data-dimensions-metrics.md). 詳しくは、 [関係タイプ](#types) および [Data Warehouseのテーブルを評価する方法。](#eval)

## 関係タイプ {#types}

2 つのテーブル間には、次の 3 種類の関係が存在します。

* [&#39;1 対 1&#39;](#onetoone)
* [&#39;1 対多&#39;](#onetomany)
* [&#39;多対多&#39;](#manytomany)

### `One-to-One` {#onetoone}

内 `one-to-one` 関係、テーブル内のレコード `B` テーブルの 1 つのレコードと 1 つのレコードのみに属する `A`. およびテーブル内のレコード `A` テーブルの 1 つのレコードと 1 つのレコードのみに属する `B`.

例えば、人と運転免許証番号との関係では、人は運転免許証番号を 1 つだけ持つことができ、運転免許証番号は 1 つのみの人物に属することができる。

![](../../assets/one-to-one.png)

### `One-to-Many` {#onetomany}

内 `one-to-many` 関係、テーブル内のレコード `A` は、テーブルの複数のレコードに属している可能性がある `B`. ～間の関係を考える `orders` および `items`  — 注文に多数の項目を含めることができますが、項目は 1 つの注文に属しています。 この場合、 `orders` テーブルは片側で `items` テーブルは多くの側面です。

![](../../assets/one-to-many_001.png)

### `Many-to-Many` {#manytomany}

内 `many-to-many` 関係、テーブル内のレコード `B` は、テーブルの複数のレコードに属している可能性がある `A`. その逆に、テーブル内のレコード `A` は、テーブルの複数のレコードに属している可能性がある `B`.

～間の関係を考える **製品** および **カテゴリ**:1 つの製品は多くのカテゴリに属することができ、複数の製品を含めることができます。

![](../../assets/many-to-many.png)

## テーブルの評価 {#eval}

テーブル間に存在する関係のタイプを考慮すると、Data Warehouse でテーブルを評価する方法を学ぶことができます。 これらの関係は、複数テーブルの計算列の定義方法を形成するので、テーブルの関係とどの側面を識別する方法を理解することが重要です。 `one` または `many`  — テーブルはに属しています。

Data Warehouse内の特定のテーブルのペアの関係を評価する方法は 2 つあります。 第 1 の方法は、 [概念的枠組み](#concept) では、テーブルのエンティティが相互にどのようにやり取りするかを考慮します。 第 2 の方法では、 [テーブルのスキーマ](#schema).

### 概念フレームワークの使用 {#concept}

この方法では、概念的なフレームワークを使用して、2 つのテーブル内のエンティティが相互にインタラクションを行う方法を記述します。 このフレームワークは、関係を考えると、何が可能かを評価することが重要です。

例えば、ユーザーと注文について考える際に、関係で可能なすべてを考慮します。 登録ユーザーは、注文を行わず、注文を 1 回だけ、または期間内に複数の注文を行うことができます。 ビジネスを開始したばかりで、まだ注文がおこなわれていない場合でも、特定のユーザーが存続期間に多数の注文をおこなえ、それに対応するテーブルが構築される可能性があります。

このメソッドを使用するには：

1. 各テーブルで説明されているエンティティを識別します。 **ヒント：通常は名詞です**. 例えば、 `user` および `orders` テーブルは、ユーザーと順序を明示的に説明します。
1. これらのエンティティの相互作用を示す動詞を識別します。 例えば、ユーザーと注文を比較する場合、ユーザーは「注文」を行います。 逆の方向に進むと、注文はユーザーに「属する」ことになります。

このタイプのフレームワークは、Data Warehouse内のテーブルの組み合わせに適用でき、関係のタイプと、一方の側で、どのテーブルが多数の側かを簡単に識別できます。

2 つのテーブルがどのようにやり取りするかを説明する用語を特定したら、最初のエンティティの特定のインスタンスと 2 番目のエンティティとの関係を考慮して、両方向でのやり取りをフレーム化します。 各関係の例を次に示します。

### `One-to-One`

1 人の人が 1 つの運転免許証を持つことができ、1 つの運転免許証だけを持つことができます。 与えられた運転免許証番号は、1 人のみの人に属します。

これは、 `one-to-one` 各テーブルが片側にある関係。

![](../../assets/one-to-one3.png)

### `One-to-Many`

1 つの特定の順序に多数の項目を含めることができます。 1 つの特定の項目が 1 つの注文に属し、1 つの注文のみです。

これは、 `one-to-many` 注文テーブルが一方の側で、項目テーブルが多くの側にある関係。

![](../../assets/one-to-many3.png)

### `Many-to-Many`

特定の製品が多くのカテゴリに属する場合があります。 1 つのカテゴリに多数の製品を含めることができます。

これは、 `many-to-many` 各テーブルが多数の側面を持つ関係。

![](../../assets/many-to-many3.png)

### テーブルのスキーマの使用 {#schema}

2 つ目のメソッドは、テーブルスキーマを利用します。 スキーマは、 [`Primary`](http://en.wikipedia.org/wiki/Unique_key) および [`Foreign`](https://en.wikipedia.org/wiki/Foreign_key) キー。 これらのキーを使用してテーブルをリンクし、関係タイプを判断できます。

2 つのテーブルをリンクする列を特定したら、列タイプを使用してテーブルの関係を評価します。 次に例を示します。

### `One-to-one`

テーブルが `primary key` 両方のテーブルの場合、各テーブルに同じ一意のエンティティが記述され、関係は `one-to-one`.

例： `users` テーブルでは、ほとんどのユーザー属性（名前など）が取り込まれ、追加の `user_source` テーブルはユーザー登録ソースをキャプチャします。 各テーブルで、行は 1 人のユーザーを表します。

![](../../assets/one-to-one1.png)

### `One-to-many`

>[!NOTE]
>
>ゲストによる注文を受け入れますか？詳しくは、 [ゲストによる注文](../data-warehouse-mgr/guest-orders.md) ゲストによる注文がテーブルとの関係に与える影響を学ぶには、以下を参照してください。

テーブルが `Foreign key` を指すさま `primary key`の場合、この設定は `one-to-many` 関係。 一方は、 `primary key` そして多くの側が `foreign key`.

![](../../assets/one-to-many1.png)

### `Many-to-many`

次のいずれかが true の場合、関係は `many-to-many`:

* `Non-primary key` 列は、2 つのテーブルをリンクするために使用されています
   ![](../../assets/many-to-many1.png)
* 複合の一部 `primary key` は、2 つのテーブルをリンクするために使用します

![](../../assets/many-to-mnay2.png)

## 次の手順

データを正確にモデリングするには、テーブルの関係を正しく評価することが重要です。 これで、テーブルが相互にどのように関連しているかを理解できたので、 [Data Warehouse管理](../data-warehouse-mgr/tour-dwm.md).
